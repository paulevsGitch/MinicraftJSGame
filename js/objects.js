class GameObject extends StaticEntity{constructor(a,b,c){super(a,b),this.spriteOffset=new Vec2,this.image=c}}class PlantEntity extends GameObject{constructor(b,c,d,e,f,a,g){super(b,c,d),this.imageX=e,this.imageY=f,this.size=a,this.waving=g,-1!=a&&this.spriteOffset.set(.5*a,a)}render(a){let b=a.getTransform();if(a.transform(1,0,0,1,16*this.position.x-this.spriteOffset.x,16*this.position.y-this.spriteOffset.y),this.waving>0){let c=Math.sin(.002*Minicraft.renderContext.time+.5*this.position.x+this.position.y)*this.waving;a.transform(1,0,c,1,0,this.spriteOffset.y),a.transform(1,0,0,1,0,-this.spriteOffset.y)}-1!=this.size?a.drawImage(this.image,this.imageX,this.imageY,this.size,this.size,0,0,this.size,this.size):a.drawImage(this.image,0,0),a.setTransform(b)}}const GameObjectTextures={tallGrass:Images.load("img/sprites/tall_grass.png"),tree:Images.load("img/sprites/tree.png")};class TallGrassPlant extends PlantEntity{constructor(a,b){super(a,b,GameObjectTextures.tallGrass,MathHelper.randomInt(2)<<4,MathHelper.randomInt(2)<<4,16,.1),this.spriteOffset.y-=2}}class TreePlant extends PlantEntity{constructor(a,b,c,d){super(a,b,GameObjectTextures.tree,0,0,48,.02),this.boundingBox.position.set(a,b).subtract(.25),this.boundingBox.size.set(.5),this.age=Math.random(),this.spriteOffset.y-=3,this.stages=c,this.collidable=!0,this.growSpeed=d,this.selectionBox=new BoundingBox(new Vec2(.8,1.6)),this.selectionBox.position.set(a,b).subtract(.4,1.4)}render(a){this.imageX=Math.floor(this.age*this.stages)*this.size,super.render(a)}onDeath(b){let a=Math.ceil(2.5*this.age);for(let c=0;c<a;c++)new ItemEntity(Items.treeSapling).drop(b,this.position);if(this.age>.5){a=Math.ceil(3*this.age)+MathHelper.randomInt(1);for(let d=0;d<a;d++)new ItemEntity(Items.treeLog).drop(b,this.position)}}}class SimpleTree extends TreePlant{constructor(a,b){super(a,b,4,.01)}tick(b,a){this.age<.999&&(this.age=this.age+a*this.growSpeed,this.age>.999&&(this.age=.999))}}