class Item{constructor(a){this.image=a,this.id=0}render(a,b,c){a.drawImage(this.image,b,c)}onUse(a,b,c,d){}renderOnCursor(a,b,c){this.render(a,16*b,16*c)}}class ItemEntity extends MovableEntity{constructor(a){super(),this.item=a,this.maxAge=10,this.canPick=!1,this.age=0}tick(b,a){super.tick(b,a),this.age+=a,this.speed-=20*a,this.speed<0&&(this.speed=0),this.age>this.maxAge&&(this.alive=!1),this.canPick=this.age>.5}render(a){if(this.age>8){let c=.25*Math.cos((this.age-8)*10)+.75;Render.setAlpha(a,c)}let b=4*Math.sin(this.age)+4;if(this.age<.4){let d=MathHelper.clamp(this.age/.2-1,0,1),e=6*Math.cos(this.age/.4*Math.PI)+8;b=MathHelper.lerp(e,b,d)}this.item.render(a,16*this.position.x-8,16*this.position.y-8-b),Render.setAlpha(a,1)}drop(a,b){this.velocity.set(MathHelper.randomCentered(),MathHelper.randomCentered()).normalize(),this.speed=5,this.position.set(b),a.addEntity(this)}}class PlacerItem extends Item{constructor(b,a){super(b),this.entityConstructor=a,this.entityInstance=a(0,0)}onUse(c,a,b,d){this.entityInstance.position.set(a,b),c.addEntity(this.entityConstructor(a,b)),d.count--}renderOnCursor(a,b,c){Render.setAlpha(a,.5),this.entityInstance.position.set(b,c),this.entityInstance.render(a),Render.setAlpha(a,1)}drop(a,b){this.velocity.set(MathHelper.randomCentered(),MathHelper.randomCentered()).normalize(),this.speed=5,this.position.set(b),a.addEntity(this)}}const Items={values:[]};Items.registerItem=function(a){var b=Items.values,c=b.length;return void 0===b[c]&&(b[c]=a,a.id=c),a},Items.treeLog=Items.registerItem(new Item(Images.load("img/items/tree_log.png"))),Items.treeSapling=Items.registerItem(new PlacerItem(Images.load("img/items/tree_sapling.png"),(b,c)=>{let a=new SimpleTree(b,c);return a.age=0,a}))